# 配對算法選擇決策 - 第一次討論紀錄

**日期：** 2025-12-05
**主題：** Cosine vs 歐氏距離 - MVP 算法選擇
**參與者：** Sabrina Yang（Product Lead）、Claude Code（技術顧問）

---

## 📝 討論摘要

### 核心問題
配對算法採用 **Cosine Similarity**，但發現存在**極端值問題**。
工程師提出用 **-2,-1,0,1,2 分數**來修補 Cosine。
**關鍵問題：** 該方案與改為歐氏距離相比，哪個更好？

---

## 🔍 現象描述

### Cosine Similarity 的極端值問題

**原始問題案例：**
```
用戶 A：打掃[1] 帶客[1] 寵物[1] 作息[1] 互動[1]  (極度內向)
用戶 B：打掃[5] 帶客[5] 寵物[5] 作息[5] 互動[5]  (極度外向)

當前 Cosine 結果：相似度 = 100% ❌（應該相反）
```

### 工程師的補救方案
改變分數對應：
```
1 → -2
2 → -1
3 →  0
4 →  1
5 →  2
```

改後再用 Cosine：
```
[-2,-2,-2,-2,-2] vs [2,2,2,2,2]
cosine = -1.0 → 轉換為分數 0%（相反）✓ 正確
```

---

## 💡 下次討論的目標

需要**公平對比**以下兩個完整方案：

### ✅ 方案 A：Cosine + 改分數（-2~2）
- 核心算法：Cosine Similarity
- 數據轉換：1-5 → -2~2
- 前端呈現：保持 1-5 的文字選項（用戶無感）
- 後端計算：用 -2~2 數據

### ✅ 方案 B：歐氏距離
- 核心算法：Euclidean Distance
- 數據格式：保持 1-5
- 前端呈現：無改動
- 後端計算：直接用 1-5

---

## 📊 需要詳細比較的維度

| 維度 | 方案 A（Cosine+改分數） | 方案 B（歐氏距離） |
|-----|-----|-----|
| **實現成本** | ? | ? |
| **測試成本** | ? | ? |
| **數據遷移** | ? | ? |
| **前端改動** | ? | ? |
| **後續擴展性** | ? | ? |
| **加新維度難度** | ? | ? |
| **改變權重難度** | ? | ? |
| **用戶體驗** | ? | ? |
| **技術債** | ? | ? |
| **後續改進空間** | ? | ? |

---

## 🎯 下次討論需要準備

### 定量數據
- 改分數 Cosine 的完整工作量（含數據轉換）
- 歐氏距離的完整工作量
- 兩者的延期時間對比

### 定性分析
- 兩個方案的技術優劣
- 擴展性對比（加新維度、改權重）
- 長期維護成本

### 決策框架
- 如果選 Cosine+改分數，v1.1 的改進計劃是什麼？
- 如果選歐氏距離，延期是否可接受？
- 有沒有折中方案？

### 關鍵問題需確認
1. MVP 的實際截止日期是什麼？
2. 改算法會阻礙哪些其他功能？
3. 工期壓力的具體原因？

---

## 📌 重要背景信息

### 當前狀況
- **版本：** V2.0.0
- **PM 態度：** 已驗收 Cosine 方案
- **工程團隊：** 完全外包
- **工程師回應：** 「工期來不及改」

### 潛在風險
- 用 Bug 算法上線 → 用戶體驗差
- 改分數但保留 Cosine → 埋下技術債
- 不改 → 後續優化困難

### 管理考量
- PM 的工期壓力是真實的還是借口？
- 工程師是真的沒時間還是不願改？
- 這是技術問題還是人事管理問題？

---

## ✅ 下次討論的具體成果

討論完成後應該產出：

1. **完整的方案對比表**
   - 定量成本對比
   - 風險評估
   - 長期影響分析

2. **推薦方案**
   - 基於數據和邏輯
   - 清晰的決策理由

3. **行動計劃**
   - 如果選方案 A：轉換層實現、測試計劃、v1.1 改進計劃
   - 如果選方案 B：改算法、測試、新的發布時間表

4. **與 PM/工程師溝通的論點**
   - 給 PM 的說法
   - 給工程師的說法

---

## 📚 相關文檔

- `three-approaches-comparison.md` - 三種方案的初步分析
- `technical-assessment.md` - 技術評估報告

---

**狀態：** ⏸️ 暫停（待下次討論）
**下次重點：** 方案 A（Cosine+改分數）vs 方案 B（歐氏距離）的詳細對比
